---
import avatar from "../assets/avatar.webp";
import { getCollection } from "astro:content";
import AssetThumbnail from "../components/asset-thumbnail.astro";
import * as remeda from "remeda";
import Root from "$layouts/root.astro";
import { Image } from "astro:assets";

export const prerender = true;

const assets = await getCollection("assets").then(
  remeda.sortBy(remeda.prop("id")),
);
---

<Root>
  <div
    class="flex flex-col items-center justify-center gap-4 p-4 sm:(gap-6 p-8)"
  >
    <a class="flex flex-col gap-4 items-center" href="/">
      <Image
        class="rounded-3xl lt-sm:hidden"
        src={avatar}
        alt=""
        width="256"
        height="256"
        densities={[1, 1.5, 2]}
        loading="eager"
      />
      <Image
        class="rounded-3xl sm:hidden"
        src={avatar}
        alt=""
        width="192"
        height="192"
        densities={[1, 1.5, 2]}
        loading="eager"
      />
      <h1 class="text-(4xl center) font-bold">
        Maserooni's
        <span class="inline-block">VRChat Assets</span>
      </h1>
    </a>
    <ul class="grid gap-4 lg:(grid-cols-2 gap-8) grid-auto-rows-[1fr]">
      {
        assets.map((asset) => (
          <li>
            <a href={`/profile/mass/asset/${asset.id}`}>
              <AssetThumbnail {asset} />
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</Root>
